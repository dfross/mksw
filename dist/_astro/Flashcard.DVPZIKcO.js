import{r as l,s as r,t as c,u as g,v,w as C,x as m,y as j,z as q,A as K,B as M,C as S,D as Y}from"./runtime-core.esm-bundler.C8SZUrae.js";/* empty css                       */const y=(o,n)=>{const e=o.__vccOpts||o;for(const[t,u]of n)e[t]=u;return e},Q={name:"MenuIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},X=["aria-hidden","aria-label"],$=["fill","width","height"],ee={d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"},te={key:0};function ie(o,n,e,t,u,a){return l(),r("span",C(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon menu-icon",role:"img",onClick:n[0]||(n[0]=s=>o.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",ee,[e.title?(l(),r("title",te,g(e.title),1)):v("",!0)])],8,$))],16,X)}const ne=y(Q,[["render",ie]]),oe={name:"ShuffleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},le=["aria-hidden","aria-label"],re=["fill","width","height"],ae={d:"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z"},se={key:0};function ce(o,n,e,t,u,a){return l(),r("span",C(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon shuffle-icon",role:"img",onClick:n[0]||(n[0]=s=>o.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",ae,[e.title?(l(),r("title",se,g(e.title),1)):v("",!0)])],8,re))],16,le)}const de=y(oe,[["render",ce]]),he={name:"ChevronRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ue=["aria-hidden","aria-label"],ge=["fill","width","height"],fe={d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},me={key:0};function ve(o,n,e,t,u,a){return l(),r("span",C(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon chevron-right-icon",role:"img",onClick:n[0]||(n[0]=s=>o.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",fe,[e.title?(l(),r("title",me,g(e.title),1)):v("",!0)])],8,ge))],16,ue)}const _e=y(he,[["render",ve]]),be={name:"ChevronLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},we=["aria-hidden","aria-label"],ye=["fill","width","height"],pe={d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},ke={key:0};function Se(o,n,e,t,u,a){return l(),r("span",C(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon chevron-left-icon",role:"img",onClick:n[0]||(n[0]=s=>o.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",pe,[e.title?(l(),r("title",ke,g(e.title),1)):v("",!0)])],8,ye))],16,we)}const Ce=y(be,[["render",Se]]),Le={name:"VolumeHighIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},xe=["aria-hidden","aria-label"],Ie=["fill","width","height"],Me={d:"M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"},Ve={key:0};function ze(o,n,e,t,u,a){return l(),r("span",C(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon volume-high-icon",role:"img",onClick:n[0]||(n[0]=s=>o.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",Me,[e.title?(l(),r("title",Ve,g(e.title),1)):v("",!0)])],8,Ie))],16,xe)}const We=y(Le,[["render",ze]]),Re={name:"MicrophoneIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ae=["aria-hidden","aria-label"],He=["fill","width","height"],Ne={d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"},Ee={key:0};function Pe(o,n,e,t,u,a){return l(),r("span",C(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon microphone-icon",role:"img",onClick:n[0]||(n[0]=s=>o.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",Ne,[e.title?(l(),r("title",Ee,g(e.title),1)):v("",!0)])],8,He))],16,Ae)}const Be=y(Re,[["render",Pe]]),Fe={__name:"Flashcard",props:["words","set"],emits:["wordChanged"],setup(o,{expose:n,emit:e}){n();const t=o,u=e,a=m(0),s=m(!1),_=m(!1),V=m(!1),x=m(!1),p=m(!1),b=m("");let d,w=null,I,L;const z=()=>{if(x.value){const i=window.SpeechRecognition||window.webkitSpeechRecognition;d=new i,d.continuous=!1,d.interimResults=!1,d.onresult=h=>{console.log("Speech recognition result received");const J=h.results.length-1,D=h.results[J][0].transcript.trim().toLowerCase(),O=t.words[a.value].toLowerCase();D===O?b.value="Correct! Well done!":b.value=`Not quite. The word is "${O}". You said "${D}".`,_.value=!1,k()},d.onerror=h=>{console.error("Speech recognition error:",h.error),_.value=!1,b.value="Sorry, I couldn't hear you. Please try again.",k()},d.onend=()=>{console.log("Speech recognition ended"),_.value=!1,k()}}},E=async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(h=>h.stop()),p.value=!0}catch(i){console.error("Microphone permission denied:",i),p.value=!1,alert("Please grant microphone permission to use this feature.")}},f=()=>{k(),d&&d.abort(),L&&clearTimeout(L)},W=()=>{(document.hidden||document.visibilityState==="hidden")&&(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&document.visibilityState,f())},R=()=>{f()},A=()=>{f()};j(()=>{V.value="speechSynthesis"in window,x.value="SpeechRecognition"in window||"webkitSpeechRecognition"in window,z(),E(),window.addEventListener("keydown",H),window.addEventListener("setFlashcardWord",N),document.addEventListener("visibilitychange",W),window.addEventListener("blur",R),window.addEventListener("pagehide",A),I=setInterval(()=>{document.hasFocus()||f()},1e3)}),q(()=>{window.removeEventListener("keydown",H),window.removeEventListener("setFlashcardWord",N),document.removeEventListener("visibilitychange",W),window.removeEventListener("blur",R),window.removeEventListener("pagehide",A),clearInterval(I),f()});const P=async()=>{try{w=await navigator.mediaDevices.getUserMedia({audio:!0}),p.value=!0}catch(i){console.error("Microphone not available:",i),p.value=!1}},k=()=>{w&&(w.getTracks().forEach(i=>{i.stop(),w.removeTrack(i)}),w=null),_.value=!1};K(a,i=>{b.value="",u("wordChanged",i),k()});const B=()=>{a.value<t.words.length-1&&a.value++},F=()=>{a.value>0&&a.value--},T=()=>{const i=Math.floor(Math.random()*t.words.length);a.value=i},H=i=>{i.key==="ArrowRight"||i.code==="Space"?B():i.key==="ArrowLeft"?F():(i.key==="r"||i.key==="R")&&T()},N=i=>{const h=i.detail.index;h>=0&&h<t.words.length&&(a.value=h)},G=()=>{if(!V.value){alert("Speech synthesis is not supported in your browser.");return}s.value&&window.speechSynthesis.cancel(),s.value=!0;const i=new SpeechSynthesisUtterance(t.words[a.value]);i.onend=()=>{s.value=!1},i.onerror=h=>{console.error("SpeechSynthesis error:",h),s.value=!1,alert("An error occurred while trying to speak the word.")},window.speechSynthesis.speak(i)},Z=()=>{d&&(d.onresult=null,d.onerror=null,d.onend=null,d=null),z()},U={props:t,emit:u,currentIndex:a,isSpeaking:s,isListening:_,speechSupported:V,recognitionSupported:x,microphoneAvailable:p,feedback:b,get recognition(){return d},set recognition(i){d=i},get microphoneStream(){return w},set microphoneStream(i){w=i},get cleanupInterval(){return I},set cleanupInterval(i){I=i},get listenTimeout(){return L},set listenTimeout(i){L=i},initializeSpeechRecognition:z,checkMicrophonePermission:E,cleanup:f,handleVisibilityChange:W,handleWindowBlur:R,handlePageHide:A,startMicrophone:P,stopMicrophone:k,nextWord:B,previousWord:F,selectRandomWord:T,handleKeydown:H,handleSetFlashcardWord:N,speakWord:G,resetRecognition:Z,listenForWord:async()=>{if(console.log("Attempting to listen for word..."),!x.value){alert("Speech recognition is not supported in your browser.");return}try{if(await P(),!p.value){alert("No microphone detected or microphone access is denied.");return}b.value="",_.value=!0,Z(),d.start(),L=setTimeout(()=>{_.value&&(f(),b.value="Listening timed out. Please try again.")},1e4)}catch(i){console.error("Error accessing microphone:",i),alert("Unable to access the microphone. Please check your microphone settings and try again.")}},ref:m,onMounted:j,onUnmounted:q,watch:K,MenuIcon:ne,ShuffleIcon:de,ChevronRightIcon:_e,ChevronLeftIcon:Ce,VolumeHighIcon:We,MicrophoneIcon:Be};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}},Te={class:"flex flex-col items-center pt-9"},Ze={class:"text-7xl font-bold drop-shadow-md md:text-9xl","aria-live":"polite"},Ue={class:"absolute bottom-3 right-3","aria-live":"polite"},De={key:1,class:"absolute right-3 top-3"},Oe={class:"flex w-full flex-col items-center justify-between gap-2 sm:flex-row"},je={class:"flex gap-2"},qe=["disabled"],Ke=["disabled"],Ye={class:"flex gap-2"},Ge=["disabled","aria-label"],Je=["disabled","aria-label"];function Qe(o,n,e,t,u,a){return l(),r("div",Te,[c("div",{class:"relative mb-9 flex h-[50vh] max-h-[500px] w-full cursor-pointer items-center justify-center rounded-lg bg-gradient-to-b from-cyan-100 to-blue-100 text-blue-900 shadow-2xl",role:"region","aria-label":"Flashcard",onClick:t.listenForWord},[c("h2",Ze,g(e.words[t.currentIndex]),1),t.feedback?(l(),r("div",{key:0,class:M(["absolute bottom-3 rounded-full border px-4 py-2 text-lg font-semibold",{"border-green-300 bg-green-100 text-green-700":t.feedback.includes("Correct"),"border-red-300 bg-red-100 text-red-700":t.feedback.includes("Not quite")}])},g(t.feedback),3)):v("",!0),c("small",Ue,g(t.currentIndex+1)+"/"+g(e.words.length),1),t.isListening?(l(),r("div",De,[S(t.MicrophoneIcon,{class:M({"animate-pulse":t.isListening})},null,8,["class"])])):v("",!0)]),c("div",Oe,[c("div",je,[c("button",{class:"button button-iconleft",onClick:t.previousWord,disabled:t.currentIndex===0,"aria-label":"Previous word"},[S(t.ChevronLeftIcon),n[0]||(n[0]=Y(" Prev "))],8,qe),c("button",{class:"button button-icononly",onClick:t.selectRandomWord,"aria-label":"Random word"},[S(t.ShuffleIcon)]),c("button",{class:"button button-iconright",onClick:t.nextWord,disabled:t.currentIndex===e.words.length-1,"aria-label":"Next word"},[n[1]||(n[1]=Y(" Next ")),S(t.ChevronRightIcon)],8,Ke)]),c("div",Ye,[c("button",{class:"button button-icononly",onClick:t.speakWord,disabled:!t.speechSupported||t.isSpeaking,"aria-label":t.isSpeaking?"Speaking...":"Read word aloud"},[S(t.VolumeHighIcon,{class:M({"opacity-50":t.isSpeaking})},null,8,["class"])],8,Ge),c("button",{class:"button button-icononly",onClick:t.listenForWord,disabled:!t.recognitionSupported||!t.microphoneAvailable||t.isListening,"aria-label":t.recognitionSupported?t.microphoneAvailable?t.isListening?"Listening...":"Listen for pronunciation":"Microphone not available":"Speech recognition not supported"},[S(t.MicrophoneIcon,{class:M({"animate-pulse":t.isListening,"opacity-50":!t.recognitionSupported||!t.microphoneAvailable})},null,8,["class"])],8,Je)])])])}const tt=y(Fe,[["render",Qe],["__scopeId","data-v-ed24db96"]]);export{tt as default};
