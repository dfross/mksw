import{r as l,s as r,t as c,u as g,v as m,w as S,x as f,y as D,z as j,A as q,B as x,C as k,D as O}from"./runtime-core.esm-bundler.C8SZUrae.js";/* empty css                       */const v=(n,o)=>{const e=n.__vccOpts||n;for(const[t,u]of o)e[t]=u;return e},G={name:"MenuIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},J=["aria-hidden","aria-label"],Q=["fill","width","height"],X={d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"},$={key:0};function ee(n,o,e,t,u,a){return l(),r("span",S(n.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon menu-icon",role:"img",onClick:o[0]||(o[0]=s=>n.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",X,[e.title?(l(),r("title",$,g(e.title),1)):m("",!0)])],8,Q))],16,J)}const te=v(G,[["render",ee]]),ie={name:"ShuffleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},oe=["aria-hidden","aria-label"],ne=["fill","width","height"],le={d:"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z"},re={key:0};function ae(n,o,e,t,u,a){return l(),r("span",S(n.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon shuffle-icon",role:"img",onClick:o[0]||(o[0]=s=>n.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",le,[e.title?(l(),r("title",re,g(e.title),1)):m("",!0)])],8,ne))],16,oe)}const se=v(ie,[["render",ae]]),ce={name:"ChevronRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},de=["aria-hidden","aria-label"],he=["fill","width","height"],ue={d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},ge={key:0};function fe(n,o,e,t,u,a){return l(),r("span",S(n.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon chevron-right-icon",role:"img",onClick:o[0]||(o[0]=s=>n.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",ue,[e.title?(l(),r("title",ge,g(e.title),1)):m("",!0)])],8,he))],16,de)}const me=v(ce,[["render",fe]]),_e={name:"ChevronLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ve=["aria-hidden","aria-label"],be=["fill","width","height"],we={d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},ye={key:0};function pe(n,o,e,t,u,a){return l(),r("span",S(n.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon chevron-left-icon",role:"img",onClick:o[0]||(o[0]=s=>n.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",we,[e.title?(l(),r("title",ye,g(e.title),1)):m("",!0)])],8,be))],16,ve)}const ke=v(_e,[["render",pe]]),Se={name:"VolumeHighIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ce=["aria-hidden","aria-label"],Le=["fill","width","height"],xe={d:"M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"},Me={key:0};function Ie(n,o,e,t,u,a){return l(),r("span",S(n.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon volume-high-icon",role:"img",onClick:o[0]||(o[0]=s=>n.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",xe,[e.title?(l(),r("title",Me,g(e.title),1)):m("",!0)])],8,Le))],16,Ce)}const Ve=v(Se,[["render",Ie]]),ze={name:"MicrophoneIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},We=["aria-hidden","aria-label"],Re=["fill","width","height"],He={d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"},Ae={key:0};function Ne(n,o,e,t,u,a){return l(),r("span",S(n.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon microphone-icon",role:"img",onClick:o[0]||(o[0]=s=>n.$emit("click",s))}),[(l(),r("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[c("path",He,[e.title?(l(),r("title",Ae,g(e.title),1)):m("",!0)])],8,Re))],16,We)}const Ee=v(ze,[["render",Ne]]),Be={__name:"Flashcard",props:["words","set"],emits:["wordChanged"],setup(n,{expose:o,emit:e}){o();const t=n,u=e,a=f(0),s=f(!1),b=f(!1),M=f(!1),L=f(!1),w=f(!1),y=f("");let d,_=null;const I=()=>{if(L.value){const i=window.SpeechRecognition||window.webkitSpeechRecognition;d=new i,d.continuous=!1,d.interimResults=!1,d.onresult=h=>{console.log("Speech recognition result received");const Y=h.results.length-1,T=h.results[Y][0].transcript.trim().toLowerCase(),U=t.words[a.value].toLowerCase();T===U?y.value="Correct! Well done!":y.value=`Not quite. The word is "${U}". You said "${T}".`,b.value=!1,p()},d.onerror=h=>{console.error("Speech recognition error:",h.error),b.value=!1,y.value="Sorry, I couldn't hear you. Please try again.",p()},d.onend=()=>{console.log("Speech recognition ended"),b.value=!1,p()}}},A=async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(h=>h.stop()),w.value=!0}catch(i){console.error("Microphone permission denied:",i),w.value=!1,alert("Please grant microphone permission to use this feature.")}},C=()=>{p(),d&&d.abort()},V=()=>{(document.hidden||document.visibilityState==="hidden")&&C()},z=()=>{C()},W=()=>{C()};D(()=>{M.value="speechSynthesis"in window,L.value="SpeechRecognition"in window||"webkitSpeechRecognition"in window,I(),A(),window.addEventListener("keydown",R),window.addEventListener("setFlashcardWord",H),document.addEventListener("visibilitychange",V),window.addEventListener("blur",z),window.addEventListener("pagehide",W)}),j(()=>{window.removeEventListener("keydown",R),window.removeEventListener("setFlashcardWord",H),document.removeEventListener("visibilitychange",V),window.removeEventListener("blur",z),window.removeEventListener("pagehide",W),C()});const N=async()=>{try{_=await navigator.mediaDevices.getUserMedia({audio:!0}),w.value=!0}catch(i){console.error("Microphone not available:",i),w.value=!1}},p=()=>{_&&(_.getTracks().forEach(i=>{i.stop(),_.removeTrack(i)}),_=null),b.value=!1};q(a,i=>{y.value="",u("wordChanged",i),p()});const E=()=>{a.value<t.words.length-1&&a.value++},B=()=>{a.value>0&&a.value--},F=()=>{const i=Math.floor(Math.random()*t.words.length);a.value=i},R=i=>{i.key==="ArrowRight"||i.code==="Space"?E():i.key==="ArrowLeft"?B():(i.key==="r"||i.key==="R")&&F()},H=i=>{const h=i.detail.index;h>=0&&h<t.words.length&&(a.value=h)},K=()=>{if(!M.value){alert("Speech synthesis is not supported in your browser.");return}s.value&&window.speechSynthesis.cancel(),s.value=!0;const i=new SpeechSynthesisUtterance(t.words[a.value]);i.onend=()=>{s.value=!1},i.onerror=h=>{console.error("SpeechSynthesis error:",h),s.value=!1,alert("An error occurred while trying to speak the word.")},window.speechSynthesis.speak(i)},P=()=>{d&&(d.onresult=null,d.onerror=null,d.onend=null,d=null),I()},Z={props:t,emit:u,currentIndex:a,isSpeaking:s,isListening:b,speechSupported:M,recognitionSupported:L,microphoneAvailable:w,feedback:y,get recognition(){return d},set recognition(i){d=i},get microphoneStream(){return _},set microphoneStream(i){_=i},initializeSpeechRecognition:I,checkMicrophonePermission:A,cleanup:C,handleVisibilityChange:V,handleWindowBlur:z,handlePageHide:W,startMicrophone:N,stopMicrophone:p,nextWord:E,previousWord:B,selectRandomWord:F,handleKeydown:R,handleSetFlashcardWord:H,speakWord:K,resetRecognition:P,listenForWord:async()=>{if(console.log("Attempting to listen for word..."),!L.value){alert("Speech recognition is not supported in your browser.");return}try{if(await N(),!w.value){alert("No microphone detected or microphone access is denied.");return}y.value="",b.value=!0,P(),d.start()}catch(i){console.error("Error accessing microphone:",i),alert("Unable to access the microphone. Please check your microphone settings and try again.")}},ref:f,onMounted:D,onUnmounted:j,watch:q,MenuIcon:te,ShuffleIcon:se,ChevronRightIcon:me,ChevronLeftIcon:ke,VolumeHighIcon:Ve,MicrophoneIcon:Ee};return Object.defineProperty(Z,"__isScriptSetup",{enumerable:!1,value:!0}),Z}},Fe={class:"flex flex-col items-center py-9"},Pe={class:"text-7xl font-bold drop-shadow-md md:text-9xl","aria-live":"polite"},Ze={class:"absolute bottom-3 right-3","aria-live":"polite"},Te={key:1,class:"absolute right-3 top-3"},Ue={class:"flex w-full flex-col items-center justify-between gap-2 sm:flex-row"},De={class:"flex gap-2"},je=["disabled"],qe=["disabled"],Oe={class:"flex gap-2"},Ke=["disabled","aria-label"],Ye=["disabled","aria-label"];function Ge(n,o,e,t,u,a){return l(),r("div",Fe,[c("div",{class:"relative mb-9 flex aspect-video w-full cursor-pointer items-center justify-center rounded-lg bg-gradient-to-b from-cyan-100 to-blue-100 text-blue-900 shadow-2xl",role:"region","aria-label":"Flashcard",onClick:t.listenForWord},[c("h2",Pe,g(e.words[t.currentIndex]),1),t.feedback?(l(),r("div",{key:0,class:x(["absolute bottom-3 rounded-full border px-4 py-2 text-lg font-semibold",{"border-green-300 bg-green-100 text-green-700":t.feedback.includes("Correct"),"border-red-300 bg-red-100 text-red-700":t.feedback.includes("Not quite")}])},g(t.feedback),3)):m("",!0),c("small",Ze,g(t.currentIndex+1)+"/"+g(e.words.length),1),t.isListening?(l(),r("div",Te,[k(t.MicrophoneIcon,{class:x({"animate-pulse":t.isListening})},null,8,["class"])])):m("",!0)]),c("div",Ue,[c("div",De,[c("button",{class:"button button-iconleft",onClick:t.previousWord,disabled:t.currentIndex===0,"aria-label":"Previous word"},[k(t.ChevronLeftIcon),o[0]||(o[0]=O(" Prev "))],8,je),c("button",{class:"button button-icononly",onClick:t.selectRandomWord,"aria-label":"Random word"},[k(t.ShuffleIcon)]),c("button",{class:"button button-iconright",onClick:t.nextWord,disabled:t.currentIndex===e.words.length-1,"aria-label":"Next word"},[o[1]||(o[1]=O(" Next ")),k(t.ChevronRightIcon)],8,qe)]),c("div",Oe,[c("button",{class:"button button-icononly",onClick:t.speakWord,disabled:!t.speechSupported||t.isSpeaking,"aria-label":t.isSpeaking?"Speaking...":"Read word aloud"},[k(t.VolumeHighIcon,{class:x({"opacity-50":t.isSpeaking})},null,8,["class"])],8,Ke),c("button",{class:"button button-icononly",onClick:t.listenForWord,disabled:!t.recognitionSupported||!t.microphoneAvailable||t.isListening,"aria-label":t.recognitionSupported?t.microphoneAvailable?t.isListening?"Listening...":"Listen for pronunciation":"Microphone not available":"Speech recognition not supported"},[k(t.MicrophoneIcon,{class:x({"animate-pulse":t.isListening,"opacity-50":!t.recognitionSupported||!t.microphoneAvailable})},null,8,["class"])],8,Ye)])])])}const $e=v(Be,[["render",Ge],["__scopeId","data-v-25b1322c"]]);export{$e as default};
