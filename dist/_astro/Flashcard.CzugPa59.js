import{r as d,s as f,t as y,u as x,v as I,w as M,x as N,y as J,z as Q,A as Y,B as ee,C as te,D as Z,E as F}from"./runtime-core.esm-bundler.88isLF7t.js";const V=(e,n)=>{const t=e.__vccOpts||e;for(const[i,l]of n)t[i]=l;return t},se={name:"ShuffleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},oe=["aria-hidden","aria-label"],ae=["fill","width","height"],re={d:"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z"},le={key:0};function ce(e,n,t,i,l,g){return d(),f("span",M(e.$attrs,{"aria-hidden":t.title?null:!0,"aria-label":t.title,class:"material-design-icon shuffle-icon",role:"img",onClick:n[0]||(n[0]=c=>e.$emit("click",c))}),[(d(),f("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[y("path",re,[t.title?(d(),f("title",le,x(t.title),1)):I("",!0)])],8,ae))],16,oe)}const de=V(se,[["render",ce]]),ue={name:"ChevronRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},he=["aria-hidden","aria-label"],fe=["fill","width","height"],ge={d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},me={key:0};function ve(e,n,t,i,l,g){return d(),f("span",M(e.$attrs,{"aria-hidden":t.title?null:!0,"aria-label":t.title,class:"material-design-icon chevron-right-icon",role:"img",onClick:n[0]||(n[0]=c=>e.$emit("click",c))}),[(d(),f("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[y("path",ge,[t.title?(d(),f("title",me,x(t.title),1)):I("",!0)])],8,fe))],16,he)}const pe=V(ue,[["render",ve]]),ye={name:"ChevronLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},_e=["aria-hidden","aria-label"],we=["fill","width","height"],be={d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},ke={key:0};function Ce(e,n,t,i,l,g){return d(),f("span",M(e.$attrs,{"aria-hidden":t.title?null:!0,"aria-label":t.title,class:"material-design-icon chevron-left-icon",role:"img",onClick:n[0]||(n[0]=c=>e.$emit("click",c))}),[(d(),f("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[y("path",be,[t.title?(d(),f("title",ke,x(t.title),1)):I("",!0)])],8,we))],16,_e)}const Se=V(ye,[["render",Ce]]),Le={name:"EarHearingIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},xe=["aria-hidden","aria-label"],Ie=["fill","width","height"],Ee={d:"M17,20C16.71,20 16.44,19.94 16.24,19.85C15.53,19.5 15.03,18.97 14.53,17.47C14,15.91 13.06,15.18 12.14,14.47C11.35,13.86 10.53,13.23 9.82,11.94C9.29,11 9,9.93 9,9C9,6.2 11.2,4 14,4C16.8,4 19,6.2 19,9H21C21,5.07 17.93,2 14,2C10.07,2 7,5.07 7,9C7,10.26 7.38,11.65 8.07,12.9C9,14.55 10.05,15.38 10.92,16.05C11.73,16.67 12.31,17.12 12.63,18.1C13.23,19.92 14,20.94 15.36,21.65C15.87,21.88 16.43,22 17,22A4,4 0 0,0 21,18H19A2,2 0 0,1 17,20M7.64,2.64L6.22,1.22C4.23,3.21 3,5.96 3,9C3,12.04 4.23,14.79 6.22,16.78L7.63,15.37C6,13.74 5,11.5 5,9C5,6.5 6,4.26 7.64,2.64M11.5,9A2.5,2.5 0 0,0 14,11.5A2.5,2.5 0 0,0 16.5,9A2.5,2.5 0 0,0 14,6.5A2.5,2.5 0 0,0 11.5,9Z"},Ae={key:0};function ze(e,n,t,i,l,g){return d(),f("span",M(e.$attrs,{"aria-hidden":t.title?null:!0,"aria-label":t.title,class:"material-design-icon ear-hearing-icon",role:"img",onClick:n[0]||(n[0]=c=>e.$emit("click",c))}),[(d(),f("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[y("path",Ee,[t.title?(d(),f("title",Ae,x(t.title),1)):I("",!0)])],8,Ie))],16,xe)}const $e=V(Le,[["render",ze]]),Ve={name:"MicrophoneIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ne=["aria-hidden","aria-label"],Me=["fill","width","height"],Re={d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"},Ue={key:0};function Fe(e,n,t,i,l,g){return d(),f("span",M(e.$attrs,{"aria-hidden":t.title?null:!0,"aria-label":t.title,class:"material-design-icon microphone-icon",role:"img",onClick:n[0]||(n[0]=c=>e.$emit("click",c))}),[(d(),f("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[y("path",Re,[t.title?(d(),f("title",Ue,x(t.title),1)):I("",!0)])],8,Me))],16,Ne)}const Te=V(Ve,[["render",Fe]]),Be={name:"CheckboxMarkedCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},He=["aria-hidden","aria-label"],We=["fill","width","height"],Pe={d:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},Oe={key:0};function qe(e,n,t,i,l,g){return d(),f("span",M(e.$attrs,{"aria-hidden":t.title?null:!0,"aria-label":t.title,class:"material-design-icon checkbox-marked-circle-icon",role:"img",onClick:n[0]||(n[0]=c=>e.$emit("click",c))}),[(d(),f("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[y("path",Pe,[t.title?(d(),f("title",Oe,x(t.title),1)):I("",!0)])],8,We))],16,He)}const je=V(Be,[["render",qe]]),Ze={name:"AlphaXCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ke=["aria-hidden","aria-label"],Xe=["fill","width","height"],De={d:"M9,7L11,12L9,17H11L12,14.5L13,17H15L13,12L15,7H13L12,9.5L11,7H9M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2Z"},Ge={key:0};function Je(e,n,t,i,l,g){return d(),f("span",M(e.$attrs,{"aria-hidden":t.title?null:!0,"aria-label":t.title,class:"material-design-icon alpha-x-circle-icon",role:"img",onClick:n[0]||(n[0]=c=>e.$emit("click",c))}),[(d(),f("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[y("path",De,[t.title?(d(),f("title",Ge,x(t.title),1)):I("",!0)])],8,Xe))],16,Ke)}const Qe=V(Ze,[["render",Je]]),v={},$=typeof globalThis>"u"?window:globalThis,s={status:"created"},h={};v.debug=e=>{E=typeof e=="function"?e:()=>{}};let E=()=>{};v.detect=()=>ie();const ie=()=>{const e={};["speechSynthesis","speechSynthesisUtterance","speechSynthesisVoice","speechSynthesisEvent","speechSynthesisErrorEvent"].forEach(t=>{e[t]=ot(t)}),e.onvoiceschanged=O(e.speechSynthesis,"onvoiceschanged");const n=O(e.speechSynthesisUtterance,"prototype");return X.forEach(t=>{const i=`on${t}`;e[i]=n&&O(e.speechSynthesisUtterance.prototype,i)}),h.isAndroid=Ye(),h.isFirefox=tt()||et(),h.isSafari=it(),E(`is android: ${!!h.isAndroid}`),E(`is firefox: ${!!h.isFirefox}`),E(`is safari: ${!!h.isSafari}`),e},O=(e={},n)=>Object.hasOwnProperty.call(e,n)||n in e||!!e[n],K=()=>($.navigator||{}).userAgent||"",Ye=()=>/android/i.test(K()),et=()=>/kaios/i.test(K()),tt=()=>typeof $.InstallTrigger<"u"?!0:/firefox/i.test(K()),it=()=>typeof $.GestureEvent<"u",nt=["webKit","moz","ms","o"],st=e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`,ot=e=>{const n=st(e),t=nt.map(l=>`${l}${n}`),i=[e,n].concat(t).find(at);return $[i]},at=e=>$[e];v.status=()=>({...s});v.filterVoices=({name:e,language:n,localService:t,voiceURI:i})=>{const l=s.voices||[],g=typeof e<"u",c=typeof i<"u",_=typeof t<"u",C=typeof n<"u",w=C&&n.split(/[-_]+/g)[0].toLocaleLowerCase();return l.filter(u=>{if(g&&u.name.includes(e)||c&&u.voiceURI.includes(i)||_&&u.localService===t)return!0;if(C){const a=u.lang&&u.lang.toLocaleLowerCase();return a&&(a===w||a.indexOf(`${w}-`)>-1||a.indexOf(`${w}_`)>-1)}return!1})};const k=e=>{E(e),s.status=e};v.init=function({maxTimeout:e=5e3,interval:n=250,quiet:t,maxLengthExceeded:i}={}){return new Promise((l,g)=>{if(s.initialized)return l(!1);v.reset(),k("init: start");let c,_,C=!1;s.maxLengthExceeded=i||"warn";const w=m=>(k(`init: failed (${m})`),clearInterval(c),s.initialized=!1,t?l(!1):g(new Error(`EasySpeech: ${m}`))),u=()=>{if(!C)return k("init: complete"),C=!0,s.initialized=!0,clearInterval(c),b.onvoiceschanged=null,_&&b.removeEventListener("voiceschanged",_),l(!0)},a=ie();if(!(!!a.speechSynthesis&&!!a.speechSynthesisUtterance))return w("browser misses features");Object.keys(a).forEach(m=>{s[m]=a[m]});const{speechSynthesis:b}=s,S=()=>{const m=b.getVoices()||[];if(m.length>0){if(s.voices=m,k(`voices loaded: ${m.length}`),s.defaultVoice=m.find(U=>U.default),!s.defaultVoice){const U=($.navigator||{}).language||"",B=v.filterVoices({language:U});B.length>0&&(s.defaultVoice=B[0])}return s.defaultVoice||(s.defaultVoice=m[0]),!0}return!1};if(k("init: voices"),S())return u();const p=()=>{k("init: voices (timer)");let m=0;c=setInterval(()=>{if(S())return u();if(m>e)return w("browser has no voices (timeout)");m+=n},n)};a.onvoiceschanged?(k("init: voices (onvoiceschanged)"),b.onvoiceschanged=()=>S()?u():p(),setTimeout(()=>S()?u():w("browser has no voices (timeout)"),e)):(O(b,"addEventListener")&&(k("init: voices (addEventListener)"),_=()=>{if(S())return u()},b.addEventListener("voiceschanged",_)),p())})};const R=({force:e}={})=>{if(!e&&!s.initialized)throw new Error("EasySpeech: not initialized. Run EasySpeech.init() first")};v.voices=()=>(R(),s.voices);v.on=e=>(R(),X.forEach(n=>{const t=e[n];z.handler(t)&&(s.handlers[n]=t)}),{...s.handlers});const X=["boundary","end","error","mark","pause","resume","start"],z={isNumber:e=>typeof e=="number"&&!Number.isNaN(e),pitch:e=>z.isNumber(e)&&e>=0&&e<=2,volume:e=>z.isNumber(e)&&e>=0&&e<=1,rate:e=>z.isNumber(e)&&e>=.1&&e<=10,text:e=>typeof e=="string",handler:e=>typeof e=="function",voice:e=>e&&e.lang&&e.name&&e.voiceURI};v.defaults=e=>(R(),e&&(s.defaults=s.defaults||{},["voice","pitch","rate","volume"].forEach(n=>{const t=e[n],i=z[n];i(t)&&(s.defaults[n]=t)})),{...s.defaults});const rt=e=>e||s.defaults?.voice||s.defaultVoice||s.voices?.[0],lt=e=>{const n=s.speechSynthesisUtterance;return new n(e)};v.speak=({text:e,voice:n,pitch:t,rate:i,volume:l,force:g,infiniteResume:c,noStop:_,...C})=>{if(R({force:g}),!z.text(e))throw new Error("EasySpeech: at least some valid text is required to speak");if(new TextEncoder().encode(e).length>4096){const u="EasySpeech: text exceeds max length of 4096 bytes, which will not work with some voices.";switch(s.maxLengthExceeded){case"none":break;case"error":throw new Error(u);case"warn":default:console.warn(u)}}const w=u=>{const[a,r]=Object.entries(u)[0];return z[a](r)?r:s.defaults?.[a]};return new Promise((u,a)=>{k("init speak");const r=lt(e),b=rt(n);b&&(r.voice=b,r.lang=b.lang,r.voiceURI=b.voiceURI),r.text=e,r.pitch=w({pitch:t}),r.rate=w({rate:i}),r.volume=w({volume:l});const S=r.voice&&r.voice.name&&r.voice.name.toLocaleLowerCase().includes("(natural)");ct(r,{isMsNatural:S}),X.forEach(p=>{const m=C[p];z.handler(m)&&r.addEventListener(p,m),s.handlers?.[p]&&r.addEventListener(p,s.handlers[p])}),r.addEventListener("start",()=>{h.paused=!1,h.speaking=!0;const p=!S&&!h.isFirefox&&!h.isSafari&&h.isAndroid!==!0;(typeof c=="boolean"?c:p)&&ne(r)}),r.addEventListener("end",p=>{k("speak complete"),h.paused=!1,h.speaking=!1,clearTimeout(T),u(p)}),r.addEventListener("error",(p={})=>{k(`speak failed: ${p.message}`),h.paused=!1,h.speaking=!1,clearTimeout(T),a(p)}),clearTimeout(T),_!==!0&&s.speechSynthesis.cancel(),setTimeout(()=>s.speechSynthesis.speak(r),10)})};const ct=({voice:e,pitch:n,rate:t,volume:i},{isMsNatural:l=!1}={})=>{E(`utterance: voice=${e?.name} volume=${i} rate=${t} pitch=${n} isMsNatural=${l}`)};let T;function ne(e){if(!e&&T)return E("force-clear timeout"),$.clearTimeout(T);const{paused:n,speaking:t}=s.speechSynthesis,i=t||h.speaking,l=n||h.paused;E(`resumeInfinity isSpeaking=${i} isPaused=${l}`),i&&!l&&(s.speechSynthesis.pause(),s.speechSynthesis.resume()),T=$.setTimeout(function(){ne(e)},5e3)}v.cancel=()=>{R(),k("cancelling"),s.speechSynthesis.cancel(),h.paused=!1,h.speaking=!1};v.resume=()=>{R(),k("resuming"),h.paused=!1,h.speaking=!0,s.speechSynthesis.resume()};v.pause=()=>{if(R(),k("pausing"),h.isAndroid)return E("patch pause on Android with cancel"),s.speechSynthesis.cancel();s.speechSynthesis.pause(),h.paused=!0,h.speaking=!1};v.reset=()=>{Object.assign(s,{status:"reset",initialized:!1,speechSynthesis:null,speechSynthesisUtterance:null,speechSynthesisVoice:null,speechSynthesisEvent:null,speechSynthesisErrorEvent:null,voices:null,defaultVoice:null,defaults:{pitch:1,rate:1,volume:1,voice:null},handlers:{}})};const dt={__name:"Flashcard",props:{words:{type:Array,required:!0},set:{type:String,required:!0}},emits:["wordChanged"],setup(e,{expose:n,emit:t}){n();const i=e,l=t,g=N(0),c=N(!1),_=N(!1),C=N(!1),w=N(!1),u=N("");let a,r;const b=async()=>{try{await v.init({maxTimeout:5e3,interval:250}),C.value=!0}catch(o){console.error("Speech synthesis initialization failed:",o),C.value=!1}},S=async()=>{if(!C.value){H("Speech synthesis is not supported in your browser.");return}const o=i.words[g.value].trim();c.value&&await v.cancel(),c.value=!0;try{const L=v.voices();let A=L.find(W=>W.name.toLowerCase().includes("cathrine"));if(A||(A=L.find(W=>W.lang==="en-US")),!A&&L.length>0&&(A=L[0]),!A)throw new Error("No voices available");let P=o;o.length===1&&o.toLowerCase()==="i"&&(P=`- ${o} -`),await v.speak({text:P,voice:A,pitch:1,rate:.8,volume:1})}catch(L){console.error("Speech synthesis error:",L),H("An error occurred while trying to speak the word.")}finally{c.value=!1}},p=()=>{if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){const o=window.SpeechRecognition||window.webkitSpeechRecognition;a=new o,a.continuous=!1,a.interimResults=!1,a.onresult=L=>{const A=L.results.length-1,P=L.results[A][0].transcript.trim().toLowerCase(),W=i.words[g.value].toLowerCase();q(P===W?"Correct! Well done!":"Not quite. Try again."),_.value=!1},a.onerror=L=>{console.error("Speech recognition error:",L.error),_.value=!1,H("Sorry, I couldn't hear you. Please try again.")},a.onend=()=>{_.value=!1},w.value=!0}else w.value=!1},m=()=>{if(!w.value){H("Speech recognition is not supported in your browser.");return}_.value?a.stop():(u.value="",_.value=!0,a.start())},U=()=>{g.value<i.words.length-1&&g.value++},B=()=>{g.value>0&&g.value--},D=()=>{const o=Math.floor(Math.random()*i.words.length);g.value=o},q=o=>{u.value=o},H=o=>{u.value=o},j=o=>{o.key==="ArrowRight"||o.code==="Space"?U():o.key==="ArrowLeft"?B():o.key==="r"||o.key==="R"?D():o.key==="s"||o.key==="S"?S():(o.key==="l"||o.key==="L")&&m()};J(async()=>{await b(),p(),window.addEventListener("keydown",j),r=requestAnimationFrame(function o(){document.hasFocus()||a&&_.value&&a.stop(),r=requestAnimationFrame(o)})}),Q(()=>{window.removeEventListener("keydown",j),cancelAnimationFrame(r),a&&a.stop()}),Y(g,o=>{u.value="",l("wordChanged",o)});const G={props:i,emit:l,currentIndex:g,isSpeaking:c,isListening:_,speechSupported:C,recognitionSupported:w,feedback:u,get recognition(){return a},set recognition(o){a=o},get cleanupInterval(){return r},set cleanupInterval(o){r=o},initSpeech:b,speakWord:S,initializeSpeechRecognition:p,listenForWord:m,nextWord:U,previousWord:B,selectRandomWord:D,showFeedback:q,showError:H,handleKeydown:j,ref:N,onMounted:J,onUnmounted:Q,watch:Y,ShuffleIcon:de,ChevronRightIcon:pe,ChevronLeftIcon:Se,EarHearingIcon:$e,MicrophoneIcon:Te,CheckboxMarkedCircleIcon:je,AlphaXCircleIcon:Qe,get EasySpeech(){return v}};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}},ut={class:"flex flex-col items-center pt-9"},ht={class:"relative mb-9 flex h-[30vh] w-full items-center justify-center rounded-lg bg-gradient-to-b from-cyan-100 to-blue-100 text-blue-900 shadow-2xl sm:h-[50vh] sm:max-h-[500px]",role:"region","aria-label":"Flashcard"},ft={class:"text-7xl font-medium drop-shadow-md md:text-9xl","aria-live":"polite"},gt={class:"absolute bottom-3 right-3","aria-live":"polite"},mt={key:1,class:"absolute right-3 top-3"},vt={class:"flex w-full flex-col items-center justify-between gap-2 sm:flex-row"},pt={class:"flex gap-2"},yt=["disabled"],_t=["disabled"],wt={class:"flex gap-2"},bt=["disabled"],kt=["disabled"];function Ct(e,n,t,i,l,g){return d(),f("div",ut,[y("div",ht,[y("h2",ft,x(t.words[i.currentIndex]),1),i.feedback?(d(),f("div",{key:0,class:ee(["absolute bottom-3 flex items-center gap-1 rounded-full border px-4 py-2 text-lg font-semibold",{"border-green-300 bg-green-100 text-green-700":i.feedback.includes("Correct"),"border-red-300 bg-red-200 text-red-800":i.feedback.includes("Not quite")}])},[i.feedback.includes("Correct")?(d(),te(i.CheckboxMarkedCircleIcon,{key:0,size:24,class:"mr-2 text-green-700"})):I("",!0),i.feedback.includes("Not quite")?(d(),te(i.AlphaXCircleIcon,{key:1,size:24,class:"mr-2 text-red-700"})):I("",!0),Z(" "+x(i.feedback),1)],2)):I("",!0),y("small",gt,x(i.currentIndex+1)+"/"+x(t.words.length),1),i.isListening?(d(),f("div",mt,[F(i.MicrophoneIcon,{class:ee({"animate-pulse":i.isListening})},null,8,["class"])])):I("",!0)]),y("div",vt,[y("div",pt,[y("button",{class:"button button-iconleft",onClick:i.previousWord,disabled:i.currentIndex===0,"aria-label":"Previous word"},[F(i.ChevronLeftIcon),n[0]||(n[0]=Z(" Prev "))],8,yt),y("button",{class:"button button-icon",onClick:i.selectRandomWord,"aria-label":"Random word"},[F(i.ShuffleIcon)]),y("button",{class:"button button-iconright",onClick:i.nextWord,disabled:i.currentIndex===t.words.length-1,"aria-label":"Next word"},[n[1]||(n[1]=Z(" Next ")),F(i.ChevronRightIcon)],8,_t)]),y("div",wt,[y("button",{class:"button button-icon",onClick:i.speakWord,disabled:!i.speechSupported,"aria-label":"Speak word"},[F(i.EarHearingIcon)],8,bt),y("button",{class:"button button-icon",onClick:i.listenForWord,disabled:!i.recognitionSupported,"aria-label":"Listen for word"},[F(i.MicrophoneIcon)],8,kt)])])])}const Lt=V(dt,[["render",Ct]]);export{Lt as default};
