import{r as l,s as a,t as d,u as f,v as g,w as b,x as w,y as D,z as X,A as O,B as K,C as Y,D as B,E as S}from"./runtime-core.esm-bundler.88isLF7t.js";const _=(o,n)=>{const e=o.__vccOpts||o;for(const[t,h]of n)e[t]=h;return e},J={name:"MenuIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Q=["aria-hidden","aria-label"],ee=["fill","width","height"],te={d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"},ie={key:0};function ne(o,n,e,t,h,c){return l(),a("span",b(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon menu-icon",role:"img",onClick:n[0]||(n[0]=r=>o.$emit("click",r))}),[(l(),a("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[d("path",te,[e.title?(l(),a("title",ie,f(e.title),1)):g("",!0)])],8,ee))],16,Q)}const oe=_(J,[["render",ne]]),le={name:"ShuffleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},re=["aria-hidden","aria-label"],ae=["fill","width","height"],se={d:"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z"},ce={key:0};function de(o,n,e,t,h,c){return l(),a("span",b(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon shuffle-icon",role:"img",onClick:n[0]||(n[0]=r=>o.$emit("click",r))}),[(l(),a("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[d("path",se,[e.title?(l(),a("title",ce,f(e.title),1)):g("",!0)])],8,ae))],16,re)}const ue=_(le,[["render",de]]),he={name:"ChevronRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},fe=["aria-hidden","aria-label"],ge=["fill","width","height"],me={d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},_e={key:0};function ve(o,n,e,t,h,c){return l(),a("span",b(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon chevron-right-icon",role:"img",onClick:n[0]||(n[0]=r=>o.$emit("click",r))}),[(l(),a("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[d("path",me,[e.title?(l(),a("title",_e,f(e.title),1)):g("",!0)])],8,ge))],16,fe)}const we=_(he,[["render",ve]]),be={name:"ChevronLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ce=["aria-hidden","aria-label"],ye=["fill","width","height"],ke={d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},Le={key:0};function Se(o,n,e,t,h,c){return l(),a("span",b(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon chevron-left-icon",role:"img",onClick:n[0]||(n[0]=r=>o.$emit("click",r))}),[(l(),a("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[d("path",ke,[e.title?(l(),a("title",Le,f(e.title),1)):g("",!0)])],8,ye))],16,Ce)}const xe=_(be,[["render",Se]]),pe={name:"EarHearingIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ie=["aria-hidden","aria-label"],Me=["fill","width","height"],ze={d:"M17,20C16.71,20 16.44,19.94 16.24,19.85C15.53,19.5 15.03,18.97 14.53,17.47C14,15.91 13.06,15.18 12.14,14.47C11.35,13.86 10.53,13.23 9.82,11.94C9.29,11 9,9.93 9,9C9,6.2 11.2,4 14,4C16.8,4 19,6.2 19,9H21C21,5.07 17.93,2 14,2C10.07,2 7,5.07 7,9C7,10.26 7.38,11.65 8.07,12.9C9,14.55 10.05,15.38 10.92,16.05C11.73,16.67 12.31,17.12 12.63,18.1C13.23,19.92 14,20.94 15.36,21.65C15.87,21.88 16.43,22 17,22A4,4 0 0,0 21,18H19A2,2 0 0,1 17,20M7.64,2.64L6.22,1.22C4.23,3.21 3,5.96 3,9C3,12.04 4.23,14.79 6.22,16.78L7.63,15.37C6,13.74 5,11.5 5,9C5,6.5 6,4.26 7.64,2.64M11.5,9A2.5,2.5 0 0,0 14,11.5A2.5,2.5 0 0,0 16.5,9A2.5,2.5 0 0,0 14,6.5A2.5,2.5 0 0,0 11.5,9Z"},Ae={key:0};function He(o,n,e,t,h,c){return l(),a("span",b(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon ear-hearing-icon",role:"img",onClick:n[0]||(n[0]=r=>o.$emit("click",r))}),[(l(),a("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[d("path",ze,[e.title?(l(),a("title",Ae,f(e.title),1)):g("",!0)])],8,Me))],16,Ie)}const Ee=_(pe,[["render",He]]),Ne={name:"MicrophoneIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ve=["aria-hidden","aria-label"],We=["fill","width","height"],$e={d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"},Re={key:0};function Be(o,n,e,t,h,c){return l(),a("span",b(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon microphone-icon",role:"img",onClick:n[0]||(n[0]=r=>o.$emit("click",r))}),[(l(),a("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[d("path",$e,[e.title?(l(),a("title",Re,f(e.title),1)):g("",!0)])],8,We))],16,Ve)}const Fe=_(Ne,[["render",Be]]),Pe={name:"CheckboxMarkedCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Te=["aria-hidden","aria-label"],Ze=["fill","width","height"],qe={d:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},Ue={key:0};function je(o,n,e,t,h,c){return l(),a("span",b(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon checkbox-marked-circle-icon",role:"img",onClick:n[0]||(n[0]=r=>o.$emit("click",r))}),[(l(),a("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[d("path",qe,[e.title?(l(),a("title",Ue,f(e.title),1)):g("",!0)])],8,Ze))],16,Te)}const De=_(Pe,[["render",je]]),Xe={name:"AlphaXCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Oe=["aria-hidden","aria-label"],Ke=["fill","width","height"],Ye={d:"M9,7L11,12L9,17H11L12,14.5L13,17H15L13,12L15,7H13L12,9.5L11,7H9M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2Z"},Ge={key:0};function Je(o,n,e,t,h,c){return l(),a("span",b(o.$attrs,{"aria-hidden":e.title?null:!0,"aria-label":e.title,class:"material-design-icon alpha-x-circle-icon",role:"img",onClick:n[0]||(n[0]=r=>o.$emit("click",r))}),[(l(),a("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[d("path",Ye,[e.title?(l(),a("title",Ge,f(e.title),1)):g("",!0)])],8,Ke))],16,Oe)}const Qe=_(Xe,[["render",Je]]),et={__name:"Flashcard",props:{words:{type:Array,required:!0},set:{type:String,required:!0}},emits:["wordChanged"],setup(o,{expose:n,emit:e}){n();const t=o,h=e,c=w(0),r=w(""),C=w(!1),x=w(!1),A=w(!1),M=w(!1),H=w(!1);let u=null,y=null,z,p;const E=()=>{if(M.value&&!u){const i=window.SpeechRecognition||window.webkitSpeechRecognition;u=new i,u.continuous=!1,u.interimResults=!1,u.onresult=s=>{console.log("Speech recognition result received");const m=s.results.length-1,v=s.results[m][0].transcript.trim().toLowerCase(),I=t.words[c.value].toLowerCase();v===I?r.value="Correct! Well done!":r.value=`Not quite. The word is "${I}". You said "${v}".`,C.value=!1,L()},u.onerror=s=>{console.error("Speech recognition error:",s.error),C.value=!1,r.value="Sorry, I couldn't hear you. Please try again.",L()},u.onend=()=>{console.log("Speech recognition ended"),C.value=!1,L()}}},k=()=>{L(),u&&u.abort(),p&&clearTimeout(p)},N=()=>{(document.hidden||document.visibilityState==="hidden")&&k()},V=()=>{k()},W=()=>{k()};D(()=>{A.value="speechSynthesis"in window,M.value="SpeechRecognition"in window||"webkitSpeechRecognition"in window,E(),window.addEventListener("keydown",$),window.addEventListener("setFlashcardWord",R),document.addEventListener("visibilitychange",N),window.addEventListener("blur",V),window.addEventListener("pagehide",W),z=setInterval(()=>{document.hasFocus()||k()},5e3)}),X(()=>{window.removeEventListener("keydown",$),window.removeEventListener("setFlashcardWord",R),document.removeEventListener("visibilitychange",N),window.removeEventListener("blur",V),window.removeEventListener("pagehide",W),clearInterval(z),k()});const F=async()=>{if(!y)try{y=await new Promise((i,s)=>{setTimeout(async()=>{try{const m=await navigator.mediaDevices.getUserMedia({audio:!0});i(m)}catch(m){s(m)}},100)}),H.value=!0}catch(i){throw console.error("Microphone not available:",i),H.value=!1,r.value="Unable to access the microphone. Please check your settings and try again.",i}},L=()=>{y&&(y.getTracks().forEach(i=>{i.stop()}),y=null),C.value=!1};O(c,i=>{r.value="",h("wordChanged",i),L()});const P=()=>{c.value<t.words.length-1&&c.value++},T=()=>{c.value>0&&c.value--},Z=(()=>{let i=123456789,s=362436069,m=521288629,v=88675123;return()=>{const I=i^i<<11;return i=s,s=m,m=v,v=v^v>>19^(I^I>>8),v/4294967296+.5}})(),q=()=>{const i=Math.floor(Z()*t.words.length);c.value=i},$=i=>{i.key==="ArrowRight"||i.code==="Space"?P():i.key==="ArrowLeft"?T():(i.key==="r"||i.key==="R")&&q()},R=i=>{const s=i.detail.index;s>=0&&s<t.words.length&&(c.value=s)},G=()=>{if(!A.value){r.value="Speech synthesis is not supported in your browser.";return}const i=t.words[c.value].trim();x.value&&window.speechSynthesis.cancel(),x.value=!0;const s=new SpeechSynthesisUtterance(i);s.text=i,s.rate=.8,s.pitch=1,i.length===1&&i.toLowerCase()==="i"?s.text=`- ${i}`:s.text=i,s.onend=()=>{x.value=!1},s.onerror=m=>{console.error("SpeechSynthesis error:",m),x.value=!1,r.value="An error occurred while trying to speak the word."},window.speechSynthesis.speak(s)},U=()=>{u&&(u.abort(),u.onresult=null,u.onerror=null,u.onend=null,E())},j={props:t,emit:h,currentIndex:c,feedback:r,isListening:C,isSpeaking:x,speechSupported:A,recognitionSupported:M,microphoneAvailable:H,get recognition(){return u},set recognition(i){u=i},get microphoneStream(){return y},set microphoneStream(i){y=i},get cleanupInterval(){return z},set cleanupInterval(i){z=i},get listenTimeout(){return p},set listenTimeout(i){p=i},initializeSpeechRecognition:E,cleanup:k,handleVisibilityChange:N,handleWindowBlur:V,handlePageHide:W,startMicrophone:F,stopMicrophone:L,nextWord:P,previousWord:T,xorshift:Z,selectRandomWord:q,handleKeydown:$,handleSetFlashcardWord:R,speakWord:G,resetRecognition:U,listenForWord:async()=>{if(console.log("Attempting to listen for word..."),!M.value){r.value="Speech recognition is not supported in your browser.";return}try{await F(),r.value="",C.value=!0,U(),u.start(),p=setTimeout(()=>{C.value&&(k(),r.value="Listening timed out. Please try again.")},1e4)}catch(i){console.error("Error accessing microphone:",i),r.value="Unable to access the microphone. Please check your microphone settings and try again."}},ref:w,onMounted:D,onUnmounted:X,watch:O,MenuIcon:oe,ShuffleIcon:ue,ChevronRightIcon:we,ChevronLeftIcon:xe,EarHearingIcon:Ee,MicrophoneIcon:Fe,CheckboxMarkedCircleIcon:De,AlphaXCircleIcon:Qe};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}},tt={class:"flex flex-col items-center pt-9"},it={class:"relative mb-9 flex h-[30vh] w-full items-center justify-center rounded-lg bg-gradient-to-b from-cyan-100 to-blue-100 text-blue-900 shadow-2xl sm:h-[50vh] sm:max-h-[500px]",role:"region","aria-label":"Flashcard"},nt={class:"text-7xl font-medium drop-shadow-md md:text-9xl","aria-live":"polite"},ot={class:"absolute bottom-3 right-3","aria-live":"polite"},lt={key:1,class:"absolute right-3 top-3"},rt={class:"flex w-full flex-col items-center justify-between gap-2 sm:flex-row"},at={class:"flex gap-2"},st=["disabled"],ct=["disabled"],dt={class:"flex gap-2"},ut=["disabled"],ht=["disabled"];function ft(o,n,e,t,h,c){return l(),a("div",tt,[d("div",it,[d("h2",nt,f(e.words[t.currentIndex]),1),t.feedback?(l(),a("div",{key:0,class:K(["absolute bottom-3 rounded-full border px-4 py-2 text-lg font-medium",{"border-green-300 bg-green-100 text-green-700":t.feedback.includes("Correct"),"border-red-300 bg-red-100 text-red-700":t.feedback.includes("Not quite")}])},[t.feedback.includes("Correct")?(l(),Y(t.CheckboxMarkedCircleIcon,{key:0,size:20,class:"mr-2 text-green-700"})):g("",!0),t.feedback.includes("Not quite")?(l(),Y(t.AlphaXCircleIcon,{key:1,size:20,class:"mr-2 text-red-700"})):g("",!0),B(" "+f(t.feedback),1)],2)):g("",!0),d("small",ot,f(t.currentIndex+1)+"/"+f(e.words.length),1),t.isListening?(l(),a("div",lt,[S(t.MicrophoneIcon,{class:K({"animate-pulse":t.isListening})},null,8,["class"])])):g("",!0)]),d("div",rt,[d("div",at,[d("button",{class:"button button-iconleft",onClick:t.previousWord,disabled:t.currentIndex===0,"aria-label":"Previous word"},[S(t.ChevronLeftIcon),n[0]||(n[0]=B(" Prev "))],8,st),d("button",{class:"button button-icon",onClick:t.selectRandomWord,"aria-label":"Random word"},[S(t.ShuffleIcon)]),d("button",{class:"button button-iconright",onClick:t.nextWord,disabled:t.currentIndex===e.words.length-1,"aria-label":"Next word"},[n[1]||(n[1]=B(" Next ")),S(t.ChevronRightIcon)],8,ct)]),d("div",dt,[d("button",{class:"button button-icon",onClick:t.speakWord,disabled:!t.speechSupported,"aria-label":"Speak word"},[S(t.EarHearingIcon)],8,ut),d("button",{class:"button button-icon",onClick:t.listenForWord,disabled:!t.recognitionSupported,"aria-label":"Listen for word"},[S(t.MicrophoneIcon)],8,ht)])])])}const _t=_(et,[["render",ft]]);export{_t as default};
